## This program is protected under the GNU GPL (See COPYING)

DEFINES = -D_GNU_SOURCE @DEFS@

CC = @CC@
MAKE = @MAKE@

prefix = @prefix@
exec_prefix = @exec_prefix@
bindir = ${DESTDIR}@bindir@
CFLAGS += $(DEFINES) -Wall -Wextra -pedantic-errors
INCS = @MYINCLUDE@
LIBS = @LIBS@
DEFAULT_FILE_DIR = $(HOME)

OFILES = config.o cursor.o data.o files.o help.o highlight.o input.o main.o \
         memory.o misc.o net.o parse.o regexp.o session.o tables.o terminal.o \
				 tokenize.o update.o utils.o vt102.o


default: all

all:	ct

ct: Makefile $(OFILES) defs.h
	@echo "---- Linking..."
	$(CC) $(CFLAGS) -o $@ $(OFILES) $(LIBS)

Makefile: Makefile.in
	@echo "You need to run ./configure first; then try make."
	@exit 1

install: ct
	-mkdir -p $(bindir)
	cp ct $(bindir)

# Autocompile all .c files into .o files using this rule:
.c.o:
	$(CC) $(CFLAGS) -c $<

clean:
	rm -f *.o config.status config.log

distclean:
	rm -f *.o config.status config.log ct Makefile config.h 
